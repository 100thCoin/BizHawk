<Project>
	<Import Project="MainSlnCommon.props" />
	<PropertyGroup>
		<OutputPath>$(MSBuildProjectDirectory)/../../output/</OutputPath>
		<!-- Setting TargetFileName does not change the AssemblyName (as setting TargetName would), but also does not change the output file name
			 for the executable on build (as one would expect). So we still need to rename the executable file below. Using this method has the advantage
			 of IDEs respecting the TargetFileName and expecting it. -->
		<TargetFileName>$(MSBuildProjectName.Substring($([MSBuild]::Add($(MSBuildProjectName.LastIndexOf('.')), 1)))).exe</TargetFileName>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
		<OutputType>Exe</OutputType>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
		<OutputType>WinExe</OutputType>
	</PropertyGroup>
	<Target Name="PostBuild" AfterTargets="PostBuildEvent">
		<ItemGroup>
			<NotExecFilesFromExecProj Include="$(OutputPath)*.dll" />
		</ItemGroup>
		<Move SourceFiles="@(NotExecFilesFromExecProj)" DestinationFolder="$(OutputPath)dll/" />
		<Move SourceFiles="$(OutputPath)$(MSBuildProjectName).exe" DestinationFiles="$(OutputPath)$(TargetFileName)" />
	</Target>
</Project>
