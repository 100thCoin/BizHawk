<Project Sdk="Microsoft.NET.Sdk">
	<PropertyGroup>
		<DebugType>pdbonly</DebugType>
		<DefineConstants>TRACE</DefineConstants>
		<ErrorReport>prompt</ErrorReport>
		<Optimize>true</Optimize>
		<OutputPath>./bin</OutputPath>
		<PlatformTarget>AnyCPU</PlatformTarget>
		<TargetFramework>netstandard2.0</TargetFramework>
	</PropertyGroup>
	<ItemGroup>
		<Compile Include="svnrev.cs" /><!-- Not checked-in, but needs to be added to the compile list which is generated before the pre-build event, so this will make MSBuild pretend it's there when cloning. -->
	</ItemGroup>
	<Target Name="Build">
		<!-- when is this called? it's never run and failed on Linux -->
		<Exec Command="&quot;$(MSBuildProjectDirectory)\subwcrev.bat&quot; $(MSBuildProjectDirectory)" Condition=" '$(OS)' == 'Windows_NT' " WorkingDirectory="$(MSBuildProjectDirectory)" />
	</Target>
	<Target Name="PreBuild" AfterTargets="PreBuildEvent">
		<Exec Command='"$(ProjectDir)..\Build\BizHawk.Build.Tool.exe" GIT_REV --wc "$(ProjectDir).." --template "$(ProjectDir)svnrev_template" --out "$(ProjectDir)svnrev.cs"' Condition=" '$(OS)' == 'Windows_NT' " />
		<Exec Command='"$(ProjectDir)../Build/standin.sh"' Condition=" '$(OS)' != 'Windows_NT' " />
	</Target>
</Project>
